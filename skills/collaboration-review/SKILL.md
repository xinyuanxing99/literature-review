---
name: Collaboration Review
description: This skill should be used when the user asks to "复盘", "总结经验", "记录错误", "踩坑了", "做错了", "下次避免", "协作复盘", "工作复盘", "反思", "记录教训", or wants to review and document mistakes, pitfalls, or lessons learned from a collaboration session. Use this skill to systematically analyze what went wrong, why it happened, and how to improve in the future.
version: 0.2.0
---

# Collaboration Review Skill (协作复盘 Skill)

系统化复盘协作中的错误、踩坑和成功经验。目标是通过避免重复错误来提高效率。

## 触发条件

**使用这个 Skill 当：**
- 用户说"复盘"、"做复盘"
- 用户提到出了问题或 suboptimal
- 用户表达不满意或沮丧
- 完成重要任务后想回顾过程
- 用户问"下次怎么避免"、"怎么改进"
- 用户说"踩坑了"、"犯错了"

**不要使用当：**
- 用户只是问简单问题
- 用户想要快速获取信息
- 这是第一次合作（没有历史可回顾）

## 标准记录格式（约10行/条）

每条记录必须包含以下字段：

```markdown
### 🔴 GitHub 授权失败重复尝试 #api #协作 #体验
- **场景**: GitHub 授权失败后，AI 不断重复尝试相同方法
- **根本原因**: AI 没有失败检查点机制，只按预设流程执行
- **错误做法**: gh auth login 失败后再试 → 又失败 → 再试...
- **正确做法**: 失败1次后主动问"要不要换个方式？"
- **责任归因**: AI问题（缺乏检查点）
- **时间**: 2026-02-23 | 项目: literature-review
```

### 必须字段说明

| 字段 | 说明 |
|------|------|
| 严重程度 | 🔴高/🟡中/🟢低 |
| 错误类型标签 | #python #database #api #协作 #沟通 #环境 #模型边界 等 |
| 场景 | 什么情况下发生的 |
| 根本原因 | 为什么发生（不是表象） |
| 错误做法 | 当时做了什么 |
| 正确做法 | 下次应该怎么做 |
| 责任归因 | AI问题 / 用户指令不清 / 环境问题 / 模型能力边界 |
| 时间戳 | YYYY-MM-DD |
| 项目名 | 项目名称 |

## 工作流程

### Step 1: 收集背景

需要时向用户确认：
- "你想复盘哪个具体的事情？"
- "有哪些地方你觉得不好的？"
- "这次协作中你最在意的问题是什么？"

### Step 2: 识别问题

与用户一起识别：
- 什么地方出了问题？
- 什么效率低下？
- 什么导致挫折感？
- 什么可以做得更好？

### Step 3: 分析根因

使用 5 Whys 方法深挖：
- **表象**: 发生了什么？
- **原因**: 为什么会发生？
- **根本原因**: 最深层的原因是什么？

### Step 4: 分类记录

使用标准格式记录：

```markdown
### [严重程度] [标题] [错误类型标签]
- **场景**: [什么情况下发生的]
- **根本原因**: [为什么发生]
- **错误做法**: [当时做了什么]
- **正确做法**: [下次应该怎么做]
- **责任归因**: [AI问题/用户指令不清/环境问题/模型能力边界]
- **时间**: [YYYY-MM-DD] | 项目: [项目名]
```

### Step 5: 成功案例记录

不只记录失败，成功也要记！

```markdown
### ✅ 成功案例：多层次文献调研
- **成功原因**: 用户需求分层明确，先总体后深入
- **关键决策**: 先搜索 AI 主题，再追问量子 AI，最后细化到量子 ML 算法
- **可复用策略**:
  1. 逐层深入，每次聚焦一个子主题
  2. 用户说"某个方面"时立即深入
  3. 每次返回结果后问"想了解哪方面"
- **时间**: 2026-02-23 | 项目: literature-review
```

### Step 6: 高频错误检测

**机制**: 同类错误出现 ≥ 2 次，标记 ⭐ 高频教训

```markdown
### ⭐ 高频教训：授权失败后重复尝试
- **出现次数**: 2次（2026-02-23 GitHub授权、2026-02-23 GitHub授权）
- **触发条件**: 任何需要用户授权的操作
- **预防措施**: 任何授权尝试失败，立即改为手动步骤引导
- **显示**: 任务开始时置顶显示此警告
```

### Step 7: 写入文档

记录到项目根目录：
- `COLLABORATION_REVIEW.md` - 所有复盘记录
- 或 `reviews/YYYY-MM-DD-topic.md` - 单独文件

### Step 8: 推送到 GitHub

确保复盘记录同步到远程仓库。

## 存储路径（保持不变）

- 项目根目录: `COLLABORATION_REVIEW.md`
- 或: `reviews/YYYY-MM-DD-topic.md`

## 成功案例模块

### 记录成功案例

当协作顺利时，也要记录：

```markdown
### ✅ 成功案例：[标题]
- **成功原因**: [为什么成功]
- **关键决策**: [哪个关键决策起了作用]
- **可复用的策略**:
  1. [具体策略1]
  2. [具体策略2]
- **时间**: YYYY-MM-DD | 项目: 项目名
```

### 成功案例的价值

- 识别什么有效
- 建立可复用的模式
- 为未来提供正向参考

## 高频错误机制

### 检测逻辑

每次记录新错误时：
1. 检查是否有相同标签的错误已存在
2. 如果存在，累加计数
3. 计数 ≥ 2，标记 ⭐ 高频教训

### 置顶显示

当任务开始时：
1. 读取 COLLABORATION_REVIEW.md
2. 查找所有 ⭐ 标记的高频教训
3. 在任务开始时显示警告：
   ```
   ⚠️ 高频教训提醒：
   - 授权失败后不要重复尝试 → 立即询问用户
   - [其他高频教训...]
   ```

## 已有记录（不要删除）

### 🔴 GitHub 连接超时反复失败 #环境 #网络
- **场景**: 每次推送到 GitHub 时，连接超时反复出现
- **根本原因**: 本地网络到 GitHub 的 443 端口不稳定，curl 超时 75 秒
- **错误做法**: 失败后立即重试，没有等待或换时间段
- **正确做法**: 失败 2 次后停止自动重试，提示用户手动操作
- **责任归因**: 环境问题
- **时间**: 2026-02-23 | 项目: literature-review
- **出现次数**: 4次 → 标记 ⭐ 高频教训

### ⭐ 高频教训：GitHub 连接超时
- **出现次数**: 4次
- **触发条件**: 任何 git push 操作
- **预防措施**: 任何 git push 失败 2 次后，不再自动重试
- **显示**: 任何需要推送到 GitHub 的任务开始前显示警告

### 🔴 GitHub 授权失败重复尝试 #api #协作
- **场景**: GitHub 授权失败后，AI 不断重复尝试相同方法
- **根本原因**: AI 没有失败检查点机制，只按预设流程执行
- **错误做法**: gh auth login 失败后再试 → 又失败 → 再试...
- **正确做法**: 失败1次后主动问"要不要换个方式？"
- **责任归因**: AI问题
- **时间**: 2026-02-23 | 项目: literature-review

---

## 关键原则总结

### AI 应该做的
- 失败1次后主动问："要不要换个方式？"
- 定期确认："我理解得对吗？"
- 设置预期："这可能需要几分钟"
- 观察挫折信号：用户说"算了" / "直接告诉我"
- 提供选择："A. 继续尝试 B. 换个方式 C. 先停一下"

### 人类应该做的
- 直接说"我不满意"或"我烦了"
- 直接说"停一停"来打断
- 明确表达偏好
- 说"直接说步骤"时想要快速答案

## 与其他 Skill 的集成

这个 Skill 应该在以下情况主动使用：
- 发生任何重要错误或问题
- 用户表达任何程度的不满
- 项目里程碑时的反思
- 主要阶段转换时
